# 子 Session (Sub-session) 完全教程

> 作者：蛋黄 🐱 | 最后更新：2026-02-06

---

## 一、什么是子 Session？

子 Session 是 OpenClaw 的**后台并行任务机制**。

简单来说：就是让我（蛋黄）可以**同时开多个分身**去干活，不耽误咱们在主 Session 里聊天！

```
┌─────────────────────────────────────────┐
│           主 Session (Main)              │
│     咱们正常聊天的地方                   │
│         ↑ 随时保持对话                    │
│         │                                │
│    ┌────┴────┬────────┬────────┐        │
│    ↓         ↓        ↓        ↓        │
│  子A       子B      子C      子D        │
│ 爬论文    跑代码    查资料   写文档      │
│ (后台)    (后台)   (后台)   (后台)      │
└─────────────────────────────────────────┘
```

---

## 二、什么时候应该用子 Session？

| ✅ 适合用子 Session | ❌ 不需要子 Session |
|-------------------|-------------------|
| 任务耗时 > 2 分钟 | 简单问答 (< 30秒) |
| 需要查很多资料 | 代码片段解释 |
| 复杂数据分析 | 简单代码修改 |
| 批量处理文件 | 日常闲聊 |
| 多个任务要并行 | 单个简单任务 |

### 典型场景举例

1. **文献调研**："帮我查最近一个月关于 Transformer 的 20 篇论文，总结核心创新点"
2. **代码重构**："把我这个 500 行的 MATLAB 脚本模块化，加上注释"
3. **数据分析**："分析这个 CSV 文件的统计特征，画几张图"
4. **多任务并行**：同时做上面三件事

---

## 三、怎么用？

### 方式一：你主动要求（推荐）

直接对我说：

```
"蛋黄，spawn 个子 session 去 [任务描述]"
```

**示例：**
- *"spawn 个子 session 去 arXiv 搜一下最近关于 LLM Agent 的论文，总结 5 篇最有意思的"*
- *"开个后台任务，帮我把这个 Python 脚本优化一下性能"*

### 方式二：我主动建议

如果我觉得任务适合开子 session，我会主动提议：

> "这个任务预计需要 5 分钟，要我 spawn 个子 session 后台跑吗？"

你回答 *"好"* 或 *"不用"* 就行。

---

## 四、完整示例演示

### 场景：你要准备一篇论文的文献综述

**你：**
```
蛋黄，我需要关于 "边缘计算 + 大模型推理优化" 的文献综述。
spawn 个子 session 去：
1. 搜索 arXiv 和 Google Scholar 的相关论文
2. 筛选出 10 篇最相关的
3. 总结每篇的核心方法、实验结果、和我的研究的关联
```

**我：**
> 好的，已 spawn 子 session！任务 ID: sub-001
> 预计需要 3-5 分钟，你可以先忙别的，好了我叫你～

【后台子 session 开始工作...】

**3分钟后：**
> 📋 **子任务完成报告** (sub-001)
> 
> 已检索到 47 篇相关论文，筛选出 10 篇核心文献：
> 
> 1. **EdgeBERT**: ...
> 2. **TinyBERT**: ...
> ...
> 
> 详细总结见附件。需要我展开讲某篇吗？

**同时主 Session 中**：
- 你可以继续问我其他问题
- 可以开更多子 session
- 完全不受影响！

---

## 五、进阶技巧

### 1. 查看所有 Session

问我：
```
"现在有几个 session 在跑？"
```

我会用 `sessions_list` 查看并汇报：
- 主 session（咱们聊天这个）
- 所有子 session 及其状态

### 2. 给子任务设置超时

你可以指定：
```
"spawn 个子 session，5 分钟内帮我总结这篇文章"
```

### 3. 多个子任务并行

```
"同时开 3 个子 session：
- 子A：查文献
- 子B：写代码
- 子C：分析数据"
```

### 4. 查看子任务历史

```
"子 session sub-001 具体干了什么？"
```

我可以 `sessions_history` 拉取详细记录。

---

## 六、注意事项

| ⚠️ 注意点 | 说明 |
|----------|------|
| 子 session **不能直接发消息给你** | 结果通过我汇总汇报 |
| 子 session **看不到主 session 的完整历史** | 需要你把关键上下文传给它 |
| 子 session 结束后可以删除或保留 | 默认保留，可以手动清理 |
| Token 消耗分开计算 | 子 session 用自己的 token 额度 |

---

## 七、快速参考卡

| 你想做的 | 说的话 |
|---------|--------|
| 开子任务 | "spawn 个子 session 去 [任务]" |
| 查看所有 session | "现在有几个 session？" |
| 查看某子任务详情 | "子 session [ID] 做了什么？" |
| 取消子任务 | "终止子 session [ID]" |
| 并行多个任务 | "同时 spawn N 个子 session..." |

---

## 八、实战练习

试试对我说这些：

1. ✅ `"spawn 个子 session 去搜一下 PyTorch 2.0 的新特性"`
2. ✅ `"帮我开个后台任务，分析 workspace 里所有 .py 文件的代码行数"`
3. ✅ `"同时开两个子 session：一个查论文，一个写代码"`

---

## 总结

> **子 Session = 让蛋黄多线程工作，你不用干等着！**

适合：耗时长、可独立、不急需即时反馈的任务

有想试的任务吗？😺
